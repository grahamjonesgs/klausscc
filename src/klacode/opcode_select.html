<!DOCTYPE html>
<html>
<head>
<style>
#opcodes { font-family: Arial, Helvetica, sans-serif; border-collapse: collapse; width: 100%;}
#opcodes td, #opcodes th { border: 1px solid #ddd; padding: 8px;}
#opcodes tr:hover {background-color: #ddd;}
#opcodes th { padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: #04AA6D; color: white;}
#macros { font-family: Arial, Helvetica, sans-serif; border-collapse: collapse; width: 100%;}
#macros td, #macros th { border: 1px solid #ddd; padding: 8px;}
#macros tr:hover {background-color: #ddd;}
#macros th { padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: #3004aa; color: white;}
</style>
</head>
<body>
<h1>Klauss ISA Instruction set and macros</h1>
Created 17/07/2023 22:27<h2>Opcode Table</h2>

<table id="opcodes">
<tr>
    <th>Name</th>
    <th>Opcode</th>
    <th>Variables</th>
    <th>Registers</th>
    <th>Description</th>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Register control 0xxx</b></td>
</tr>
<tr>
    <td>COPY</td>
    <td>000001??</td>
    <td>0</td>
    <td>2</td>
    <td>Copy registers, first to second</td>
</tr>
<tr>
    <td>AND</td>
    <td>000002??</td>
    <td>0</td>
    <td>2</td>
    <td>And registers, result in first register</td>
</tr>
<tr>
    <td>OR</td>
    <td>000003??</td>
    <td>0</td>
    <td>2</td>
    <td>Or registers, result in first register</td>
</tr>
<tr>
    <td>XOR</td>
    <td>000004??</td>
    <td>0</td>
    <td>2</td>
    <td>XOR registers, result in first register</td>
</tr>
<tr>
    <td>CMPRR</td>
    <td>000005??</td>
    <td>0</td>
    <td>2</td>
    <td>Compare registers, result in equal flag</td>
</tr>
<tr>
    <td>MINUSRR</td>
    <td>000007??</td>
    <td>0</td>
    <td>2</td>
    <td>Minus registers, result in first register</td>
</tr>
<tr>
    <td>SETR</td>
    <td>0000080?</td>
    <td>1</td>
    <td>1</td>
    <td>Set register to a value</td>
</tr>
<tr>
    <td>ADDV</td>
    <td>0000081?</td>
    <td>1</td>
    <td>1</td>
    <td>Increment register by a value</td>
</tr>
<tr>
    <td>MINUSV</td>
    <td>0000082?</td>
    <td>1</td>
    <td>1</td>
    <td>Decrement register by a value</td>
</tr>
<tr>
    <td>INCR</td>
    <td>0000084?</td>
    <td>0</td>
    <td>1</td>
    <td>Increment register</td>
</tr>
<tr>
    <td>DECR</td>
    <td>0000085?</td>
    <td>0</td>
    <td>1</td>
    <td>Decrement register</td>
</tr>
<tr>
    <td>ANDV</td>
    <td>0000086?</td>
    <td>1</td>
    <td>1</td>
    <td>AND register with value, result in register</td>
</tr>
<tr>
    <td>ORV</td>
    <td>0000087?</td>
    <td>1</td>
    <td>1</td>
    <td>OR register with value, result in register</td>
</tr>
<tr>
    <td>XORV</td>
    <td>0000088?</td>
    <td>1</td>
    <td>1</td>
    <td>XOR register with value,result in register</td>
</tr>
<tr>
    <td>SETFR</td>
    <td>0000089?</td>
    <td>0</td>
    <td>1</td>
    <td>Set register to flags value</td>
</tr>
<tr>
    <td>NEGR</td>
    <td>000008A?</td>
    <td>0</td>
    <td>1</td>
    <td>Set register 2's compliments</td>
</tr>
<tr>
    <td>SHLR</td>
    <td>000008D?</td>
    <td>0</td>
    <td>1</td>
    <td>Left shift register</td>
</tr>
<tr>
    <td>SHRR</td>
    <td>000008E?</td>
    <td>0</td>
    <td>1</td>
    <td>Right shift register</td>
</tr>
<tr>
    <td>SHLAR</td>
    <td>000008F?</td>
    <td>0</td>
    <td>1</td>
    <td>Left shift arithmetical register</td>
</tr>
<tr>
    <td>SHRAR</td>
    <td>0000090?</td>
    <td>0</td>
    <td>1</td>
    <td>Right shift arithmetical register</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Flow control 1xxx</b></td>
</tr>
<tr>
    <td>JMP</td>
    <td>00001000</td>
    <td>1</td>
    <td>0</td>
    <td>Jump</td>
</tr>
<tr>
    <td>JMPZ</td>
    <td>00001001</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if zero</td>
</tr>
<tr>
    <td>JMPNZ</td>
    <td>00001002</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if not zero</td>
</tr>
<tr>
    <td>JMPE</td>
    <td>00001003</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if equal</td>
</tr>
<tr>
    <td>JMPNE</td>
    <td>00001004</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if not equal</td>
</tr>
<tr>
    <td>JMPC</td>
    <td>00001005</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if carry</td>
</tr>
<tr>
    <td>JMPNC</td>
    <td>00001006</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if not carry</td>
</tr>
<tr>
    <td>JMPO</td>
    <td>00001007</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if overflow</td>
</tr>
<tr>
    <td>JMPNO</td>
    <td>00001008</td>
    <td>1</td>
    <td>0</td>
    <td>Jump if not overflow</td>
</tr>
<tr>
    <td>CALL</td>
    <td>00001009</td>
    <td>1</td>
    <td>0</td>
    <td>Call function</td>
</tr>
<tr>
    <td>CALLZ</td>
    <td>0000100A</td>
    <td>1</td>
    <td>0</td>
    <td>Call if zero</td>
</tr>
<tr>
    <td>CALLNZ</td>
    <td>0000100B</td>
    <td>1</td>
    <td>0</td>
    <td>Call if not zero</td>
</tr>
<tr>
    <td>CALLE</td>
    <td>0000100C</td>
    <td>1</td>
    <td>0</td>
    <td>Call if equal</td>
</tr>
<tr>
    <td>CALLNE</td>
    <td>0000100D</td>
    <td>1</td>
    <td>0</td>
    <td>Call if not equal</td>
</tr>
<tr>
    <td>CALLC</td>
    <td>0000100E</td>
    <td>1</td>
    <td>0</td>
    <td>Call if carry</td>
</tr>
<tr>
    <td>CALLNC</td>
    <td>0000100F</td>
    <td>1</td>
    <td>0</td>
    <td>Call if not carry</td>
</tr>
<tr>
    <td>CALLO</td>
    <td>00001010</td>
    <td>1</td>
    <td>0</td>
    <td>Call if overflow</td>
</tr>
<tr>
    <td>CALLNO</td>
    <td>00001011</td>
    <td>1</td>
    <td>0</td>
    <td>Call if not overflow</td>
</tr>
<tr>
    <td>RET</td>
    <td>00001012</td>
    <td>0</td>
    <td>0</td>
    <td>Return from call</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>SPI LCD Control 2xxx</b></td>
</tr>
<tr>
    <td>CDCDMR</td>
    <td>0000200?</td>
    <td>0</td>
    <td>1</td>
    <td>LCD command with register</td>
</tr>
<tr>
    <td>LCDDATAR</td>
    <td>0000201?</td>
    <td>0</td>
    <td>1</td>
    <td>LCD data with register</td>
</tr>
<tr>
    <td>LCDCMDV</td>
    <td>00002021</td>
    <td>1</td>
    <td>0</td>
    <td>LCD write command value</td>
</tr>
<tr>
    <td>LCDDATAV</td>
    <td>00002022</td>
    <td>1</td>
    <td>0</td>
    <td>LCD data with value</td>
</tr>
<tr>
    <td>LCD</td>
    <td>00002023</td>
    <td>1</td>
    <td>0</td>
    <td>Reset line</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Board LED and Switch 3xxx</b></td>
</tr>
<tr>
    <td>LEDR</td>
    <td>0000300?</td>
    <td>0</td>
    <td>1</td>
    <td>set LEDs with register</td>
</tr>
<tr>
    <td>SWR</td>
    <td>0000301?</td>
    <td>0</td>
    <td>1</td>
    <td>Get switch status into register</td>
</tr>
<tr>
    <td>7SEG1R</td>
    <td>0000302?</td>
    <td>0</td>
    <td>1</td>
    <td>Set 7 Seg 1 to register</td>
</tr>
<tr>
    <td>7SEG2R</td>
    <td>0000303?</td>
    <td>0</td>
    <td>1</td>
    <td>Set 7 Seg 2 to register</td>
</tr>
<tr>
    <td>7SEGR</td>
    <td>0000304?</td>
    <td>0</td>
    <td>1</td>
    <td>Set 7 Seg to register</td>
</tr>
<tr>
    <td>RGB1R</td>
    <td>0000305?</td>
    <td>0</td>
    <td>1</td>
    <td>RGB 1 from register</td>
</tr>
<tr>
    <td>RGB2R</td>
    <td>0000306?</td>
    <td>0</td>
    <td>1</td>
    <td>RGB 2 from register</td>
</tr>
<tr>
    <td>LEDV</td>
    <td>00003070</td>
    <td>1</td>
    <td>0</td>
    <td>Set LED to value</td>
</tr>
<tr>
    <td>7SEG1V</td>
    <td>00003071</td>
    <td>1</td>
    <td>0</td>
    <td>Set 7 Seg 1 to value</td>
</tr>
<tr>
    <td>7SEG2V</td>
    <td>00003072</td>
    <td>1</td>
    <td>0</td>
    <td>Set 7 Seg 2 to value</td>
</tr>
<tr>
    <td>7SEGBLANK</td>
    <td>00003073</td>
    <td>0</td>
    <td>0</td>
    <td>Blank 7 Seg</td>
</tr>
<tr>
    <td>RGB1V</td>
    <td>00003074</td>
    <td>1</td>
    <td>0</td>
    <td>RGB 1 from value</td>
</tr>
<tr>
    <td>RGB2V</td>
    <td>00003075</td>
    <td>1</td>
    <td>0</td>
    <td>RGB 2 from value</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Stack control 4xxx</b></td>
</tr>
<tr>
    <td>PUSH</td>
    <td>0000400?</td>
    <td>0</td>
    <td>1</td>
    <td>Push register onto stack</td>
</tr>
<tr>
    <td>POP</td>
    <td>0000401?</td>
    <td>0</td>
    <td>1</td>
    <td>Pop stack into register</td>
</tr>
<tr>
    <td>PUSHV</td>
    <td>00004020</td>
    <td>1</td>
    <td>0</td>
    <td>Push value onto stack</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Communication 5xxxx</b></td>
</tr>
<tr>
    <td>TESTMSG</td>
    <td>00005000</td>
    <td>0</td>
    <td>0</td>
    <td>send test UART message</td>
</tr>
<tr>
    <td>NEWLINE</td>
    <td>00005001</td>
    <td>0</td>
    <td>0</td>
    <td>send UART newline</td>
</tr>
<tr>
    <td>TXMEM</td>
    <td>00005002</td>
    <td>1</td>
    <td>0</td>
    <td>send 8 bytes value of memory location</td>
</tr>
<tr>
    <td>TXSTRMEM</td>
    <td>00005003</td>
    <td>1</td>
    <td>0</td>
    <td>send string at memory</td>
</tr>
<tr>
    <td>TXR</td>
    <td>0000501?</td>
    <td>0</td>
    <td>1</td>
    <td>send 8 bytes reg value in message</td>
</tr>
<tr>
    <td>TXSTRMEMR</td>
    <td>0000504?</td>
    <td>0</td>
    <td>1</td>
    <td>send string at memory location from register</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>CPU Setting 6xxxx</b></td>
</tr>
<tr>
    <td>INTSETRR</td>
    <td>000060??</td>
    <td>0</td>
    <td>2</td>
    <td>Set interrupt from registers</td>
</tr>
<tr>
    <td colspan="5" style="background-color:#b0b0b0;"><b>Other Fxxx</b></td>
</tr>
<tr>
    <td>DELAYR</td>
    <td>0000F00?</td>
    <td>0</td>
    <td>1</td>
    <td>Delay by register</td>
</tr>
<tr>
    <td>NOP</td>
    <td>0000F010</td>
    <td>0</td>
    <td>0</td>
    <td>No operation</td>
</tr>
<tr>
    <td>HALT</td>
    <td>0000F011</td>
    <td>0</td>
    <td>0</td>
    <td>Freeze and hang</td>
</tr>
<tr>
    <td>RESET</td>
    <td>0000F012</td>
    <td>0</td>
    <td>0</td>
    <td>Reset</td>
</tr>
<tr>
    <td>DELAYV</td>
    <td>0000F013</td>
    <td>1</td>
    <td>0</td>
    <td>Set by value</td>
</tr>

</table><h2>Macro Table</h2>
<table id="macros">
<tr>
    <th>Name</th>
    <th>Variables</th>
    <th>Description</th>
    <th>Details</th>
</tr>
<tr>
    <td>$IMBED1</td>
    <td>0</td>
    <td></td>
    <td>  DELAYV 0xFFFF</td>
</tr><tr>
    <td>$IMBED3</td>
    <td>0</td>
    <td></td>
    <td>  PUSH A  PUSH B  PUSH C  DELAYV 0xFFFF</td>
</tr><tr>
    <td>$POPALL</td>
    <td>0</td>
    <td></td>
    <td>  POP A  POP B  POP C</td>
</tr><tr>
    <td>$PUSHALL</td>
    <td>0</td>
    <td></td>
    <td>  PUSH A  PUSH B  PUSH C</td>
</tr><tr>
    <td>$TESTM</td>
    <td>0</td>
    <td></td>
    <td>  NOP  NOP  NOP</td>
</tr><tr>
    <td>$TESTM2</td>
    <td>0</td>
    <td></td>
    <td>  NOP</td>
</tr><tr>
    <td>$UART_STRING</td>
    <td>1</td>
    <td></td>
    <td>  PUSH A  PUSH B  SETR A %1</td>
</tr><tr>
    <td>$WAIT</td>
    <td>2</td>
    <td></td>
    <td>  DELAYV %1  DELAYV %2</td>
</tr></table>
</body>
</html>
